<?xml version="1.0" encoding="UTF-8"?>
<project
    name="Phing Recipes Output"
    description="Tasks that allow you to output text to the console, without using Phing's logging mechanism"
    basedir="."
    default="help">

    <!-- *******************************************************************
	Recipes Properties
    *********************************************************************-->
    
    <!-- Include the primary properties, in case they are not already loaded -->
    <if>
	<not>
	    <!-- isRecipesLoaded set inside the recipes.properties -->
	    <isset property="isRecipesPropertiesLoaded" />
	</not>
	<then>
	    <property file="../recipes.properties" />   
	</then>
    </if>

    <!-- *******************************************************************
	Output task definition
    *********************************************************************-->
    <includepath classpath="${phing.dir.phing_recipes_output}" />
    <taskdef name="output" classname="Output" />
    
    <target name="outputTask-help" description="Information and example of the outputTask">
	<output>
	<![CDATA[
	    Output is a small console-writer, that outputs text to
	    the current window console.

	    Example 1: Output via message attribute
		<output message="Hallo World" />

	    Example 2: Output via message attribute alias
		<output msg="Hallo" />

	    Example 3: Output without attribute
		<output>
		    This is my custom console output
		    It should print on multiple lines
		    ...
		</output>	
	]]>
	</output>
    </target>
    
    <target name="outputTask-test" description="Test the outputTask" hidden="true">
	<output message="Output via message attr" />
	
	<output msg="${nl}" />
	
	<output msg="Output via msg attr" />
	
	<output msg="${nl}" />
	
	<output>
	    Output via <![CDATA[<output></output>]]> syntax
	</output>
	
	<output msg="${nl}" />
	
	<output>
	    Output EOL test
	    Line a
	    Line b
	    Line c
	</output>
	
	<output msg="${nl}" />
	
	<output>
	    Output Formatting test
	    Line a  |	Line d	|	Line g
	    --------------------------------------
	    Line b  |	Line e	|	Line h
	    Line c  |	Line f	|	Line i
	</output>
    </target>  
    
    <!-- *******************************************************************
	Display the default available commands
    *********************************************************************-->
    <target name="help" description="Displays a list of all available targets to invoke">
	<!--
		A quick and dirty way to display all available targets in
		this build script.

		NOTE: targets with the property 'hidden="true"' will be ignored
		from the displayed list.
	-->

	<!-- Property with phing command to execute, for this build file -->
	<property name="listCommand" value="phing -f ${phing.file} -list -quiet" />
	
	<!-- invoke -->
	<exec command="${listCommand}" outputProperty="targetList" />

	<!-- output -->
	<echo>${nl}${targetList}</echo>
    </target>

    <!-- *******************************************************************
	Debug methods
    *********************************************************************-->    
        
</project>